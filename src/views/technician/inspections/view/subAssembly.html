<div ng-if="subAssembly.subAssembly.oil != false">
    <label class="form-label">Lead:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="oil.lead" placeholder="Lead"><br>
    <label class="form-label">Copper:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="oil.copper" placeholder="Copper"><br>
    <label class="form-label">Tin:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="oil.tin" placeholder="Tin"><br>
    <label class="form-label">Iron:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="oil.iron" placeholder="Iron"><br>
    <label class="form-label">PQ90:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="oil.pq90" placeholder="PQ90"><br>
    <label class="form-label">Silicon:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="oil.silicon" placeholder="Silicon"><br>
    <label class="form-label">Sodium:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="oil.sodium" placeholder="Sodium"><br>
    <label class="form-label">Aluminium:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="oil.aluminium" placeholder="Aluminium"><br>
    <label class="form-label">Water:</label><input class="form-input" type="number" ng-model="oil.water" placeholder="Water"><br>
    <label class="form-label">Viscosity:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="oil.viscosity" placeholder="Viscosity"><br>
    <label class="form-label-comment" height="60">Comment:</label><textarea class="form-comment" rows="4" ng-model="oil.comment" placeholder="Comment - Not Required"></textarea><br>

    Oil Status:<br>
    <button class="btn btn-primary" ng-if="status.oil == 'OK'">OK <i class="fa fa-check-circle" aria-hidden="true"></i></button>
    <button ng-click="changeActionStatus('OK', 1)" class="btn" ng-if="status.oil != 'OK'">OK <i class="fa fa-check-circle" aria-hidden="true"></i></button>
    <button class="btn btn-positive" ng-if="status.oil == 'WARNING'">WARNING <i class="fa fa fa-question-circle" aria-hidden="true"></i></button>
    <button ng-click="changeActionStatus('WARNING', 1)" class="btn" ng-if="status.oil != 'WARNING'">WARNING <i class="fa fa fa-question-circle" aria-hidden="true"></i></button>
    <button class="btn btn-negative" ng-if="status.oil == 'ACTION'">ACTION <i class="fa fa-exclamation-circle" aria-hidden="true"></i></button>
    <button ng-click="changeActionStatus('ACTION', 1)" class="btn" ng-if="status.oil != 'ACTION'">ACTION <i class="fa fa-exclamation-circle" aria-hidden="true"></i></button>
    <br>
    <div ng-if="status.oil != 'OK'">
        <label class="form-label">Issue:</label><input class="form-input" type="text" ng-model="oil.issue" placeholder="Issue with machinery"><br>
        <label class="form-label">Action:</label><input class="form-input" type="text" ng-model="oil.action" placeholder="Action to be taken">
    </div>
    <a class="form-label" ng-click="showOilComments = !showOilComments">Previous Comments</a><i class="fa fa-angle-down" aria-hidden="true"></i>
    <div ng-if="showOilComments == true">
        <ul class="table-view">
            <li class="table-view-cell" ng-repeat="comment in oilTest.comments">
                <b>Author:</b> {{ comment.author.username }}<br>
                <b>Time:</b> {{ moment(comment.timeCommented).format('HH:mm, ddd Do MMM YYYY') }}<br/>
                <b>Comment:</b> {{ comment.text }}
            </li>
        </ul>
    </div>
    <br>
    Photos: <button class="btn" ng-click="takePhoto('oil')"><i class="fa fa-camera" aria-hidden="true"></i></button><br>
    <ul class="table-view" ng-if="oilPhotos.length >=1">
        <li class="table-view-cell" ng-repeat="picture in oilPhotos">
            Photo: <img src="data:image/jpeg;base64,{{ picture.photo }}" height="42" width="42"/>
        </li>
    </ul>
</div>

<div ng-if="subAssembly.subAssembly.machineGeneral != false">
    Sub-Assembly Status:<br>
    <button class="btn btn-primary" ng-if="status.machine == 'OK'">OK <i class="fa fa-check-circle" aria-hidden="true"></i></button>
    <button ng-click="changeActionStatus('OK', 2)" class="btn" ng-if="status.machine != 'OK'">OK <i class="fa fa-check-circle" aria-hidden="true"></i></button>
    <button class="btn btn-positive" ng-if="status.machine == 'WARNING'">WARNING <i class="fa fa fa-question-circle" aria-hidden="true"></i></button>
    <button ng-click="changeActionStatus('WARNING', 2)" class="btn" ng-if="status.machine != 'WARNING'">WARNING <i class="fa fa fa-question-circle" aria-hidden="true"></i></button>
    <button class="btn btn-negative" ng-if="status.machine == 'ACTION'">ACTION <i class="fa fa-exclamation-circle" aria-hidden="true"></i></button>
    <button ng-click="changeActionStatus('ACTION', 2)" class="btn" ng-if="status.machine != 'ACTION'">ACTION <i class="fa fa-exclamation-circle" aria-hidden="true"></i></button>
    <br ng-if="status.machine == 'OK'">
    <div ng-if="status.machine != 'OK'">
        <label class="form-label">Issue:</label><input class="form-input" type="text" ng-model="machineTest.issue" placeholder="Action to be taken"><br>
        <label class="form-label">Action:</label><input class="form-input" type="text" ng-model="machineTest.action" placeholder="Action to be taken">
    </div>
    <label class="form-label-comment" height="60">Comment:</label><textarea class="form-comment" rows="4" ng-model="machineTest.comment" placeholder="Comment - Not Required"></textarea><br>
    <a class="form-label" ng-click="showMachineComments = !showMachineComments">Previous Comments</a><i class="fa fa-angle-down" aria-hidden="true"></i>
    <div ng-if="showMachineComments == true">
        <ul class="table-view">
            <li class="table-view-cell" ng-repeat="comment in machineGeneralTest.comments">
                <b>Author:</b> {{ comment.author.username }}<br>
                <b>Time:</b> {{ moment(comment.timeCommented).format('HH:mm, ddd Do MMM YYYY') }}<br/>
                <b>Comment:</b> {{ comment.text }}
            </li>
        </ul>
    </div>
    <br>
    Photos: <button class="btn" ng-click="takePhoto('machine')"><i class="fa fa-camera" aria-hidden="true"></i></button><br>
    <ul class="table-view" ng-if="machinePhotos.length >=1">
        <li class="table-view-cell" ng-repeat="picture in machinePhotos">
            Photo: <img src="data:image/jpeg;base64,{{ picture.photo }}" height="42" width="42"/>
        </li>
    </ul>
</div>

<div ng-if="subAssembly.subAssembly.wear != false">
    <label class="form-label">SMU:</label><input class="form-input" type="text" pattern="[0-9]*" ng-model="wear.SMU" placeholder="SMU"><br>
    <div ng-repeat="uniqueDetails in subAssembly.subAssembly.uniqueDetails">
        <label class="form-label">{{ uniqueDetails }}:</label><input class="form-input" type="text" ng-model="wear.detail[$index]" placeholder="{{ uniqueDetails }}"><br>
    </div>
    Wear Status:<br>
    <button class="btn btn-primary" ng-if="status.wear == 'OK'">OK <i class="fa fa-check-circle" aria-hidden="true"></i></button>
    <button ng-click="changeActionStatus('OK', 3)" class="btn" ng-if="status.wear != 'OK'">OK <i class="fa fa-check-circle" aria-hidden="true"></i></button>
    <button class="btn btn-positive" ng-if="status.wear == 'WARNING'">WARNING <i class="fa fa fa-question-circle" aria-hidden="true"></i></button>
    <button ng-click="changeActionStatus('WARNING', 3)" class="btn" ng-if="status.wear != 'WARNING'">WARNING <i class="fa fa fa-question-circle" aria-hidden="true"></i></button>
    <button class="btn btn-negative" ng-if="status.wear == 'ACTION'">ACTION <i class="fa fa-exclamation-circle" aria-hidden="true"></i></button>
    <button ng-click="changeActionStatus('ACTION', 3)" class="btn" ng-if="status.wear != 'ACTION'">ACTION <i class="fa fa-exclamation-circle" aria-hidden="true"></i></button>
    <br ng-if="status.wear == 'OK'">
    <div ng-if="status.wear != 'OK'">
        <label class="form-label">Issue:</label><input class="form-input" type="text" ng-model="wear.issue" placeholder="Action to be taken"><br>
        <label class="form-label">Action:</label><input class="form-input" type="text" ng-model="wear.action" placeholder="Action to be taken">
    </div>
    <label class="form-label-comment" height="60">Comment:</label><textarea class="form-comment" rows="4" ng-model="wear.comment" placeholder="Comment - Not Required"></textarea><br>
    <a class="form-label" ng-click="showWearComments = !showWearComments">Previous Comments</a><i class="fa fa-angle-down" aria-hidden="true"></i>
    <div ng-if="showWearComments == true">
        <ul class="table-view">
            <li class="table-view-cell" ng-repeat="comment in wearTest.comments">
                <b>Author:</b> {{ comment.author.username }}<br>
                <b>Time:</b> {{ moment(comment.timeCommented).format('HH:mm, ddd Do MMM YYYY') }}<br/>
                <b>Comment:</b> {{ comment.text }}
            </li>
        </ul>
    </div>
    <br>
    Photos: <button class="btn" ng-click="takePhoto('wear')"><i class="fa fa-camera" aria-hidden="true"></i></button><br>
    <ul class="table-view" ng-if="wearPhotos.length >=1">
        <li class="table-view-cell" ng-repeat="picture in wearPhotos">
            Photo: <img src="data:image/jpeg;base64,{{ picture.photo }}" height="42" width="42"/>
        </li>
    </ul>
</div>

<button class="btn btn-negative" ng-click="saveSubAssembly(oil, machineTest, wear)">Save</button>

<pre>{{subAssembly | json}}</pre>