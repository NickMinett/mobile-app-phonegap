<div class="segmented-control">
    <a class="control-item active" data-target="#test">
        Test
    </a>
    <a class="control-item" data-target="#comments">
        Comments
    </a>
    <a class="control-item" data-target="#photos">
        Photos
    </a>
</div>

<div id="test" class="control-content active">
    <div ng-if="subAssembly.subAssembly.machineGeneral != false">
        <h4 class="text-center m-t">Machine General Status</h4>

        <div class="segmented-control">
            <a class="control-item active" data-target="#test-machineGeneral-ok" ng-click="changeActionStatus('OK', 2)">
                OK
            </a>
            <a class="control-item" data-target="#test-machineGeneral-warning"
               ng-click="changeActionStatus('WARNING', 2)">
                Warning
            </a>
            <a class="control-item" data-target="#test-machineGeneral-action"
               ng-click="changeActionStatus('ACTION', 2)">
                Action
            </a>
        </div>

        <div class="card">
            <div id="test-machineGeneral-ok" class="control-content"
                 ng-class="{true: 'active'}[status.machine == null || status.machine == 'OK']">
                <p class="text-center m-t-sm">No further action required.</p>
            </div>
            <div id="test-machineGeneral-warning" class="control-content"
                 ng-class="{true: 'active'}[status.machine == 'WARNING']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="machineTest.issue" placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="machineTest.action" placeholder="Action to be taken">
                    </div>
                </form>
            </div>
            <div id="test-machineGeneral-action" class="control-content"
                 ng-class="{true: 'active'}[status.machine == 'ACTION']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="machineTest.issue" placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="machineTest.action" placeholder="Action to be taken">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.oil != false">
        <h4 class="text-center m-t">Oil Test</h4>

        <div class="card">
            <form class="input-group">
                <div class="input-row">
                    <label>Lead</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.lead" placeholder="Lead">
                </div>

                <div class="input-row">
                    <label>Copper</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.copper" placeholder="Copper">
                </div>

                <div class="input-row">
                    <label>Tin</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.tin" placeholder="Tin">
                </div>

                <div class="input-row">
                    <label>Iron</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.iron" placeholder="Iron">
                </div>

                <div class="input-row">
                    <label>PQ90</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.pq90" placeholder="PQ90">
                </div>

                <div class="input-row">
                    <label>Silicon</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.silicon" placeholder="Silicon">
                </div>

                <div class="input-row">
                    <label>Sodium</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.sodium" placeholder="Sodium">
                </div>

                <div class="input-row">
                    <label>Aluminium</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.aluminium" placeholder="Aluminium">
                </div>

                <div class="input-row">
                    <label>Water</label>
                    <input type="number" ng-model="oil.water" placeholder="Water">
                </div>

                <div class="input-row">
                    <label>Viscosity</label>
                    <input type="text" pattern="[0-9]*" ng-model="oil.viscosity" placeholder="Viscosity">
                </div>
            </form>
        </div>

        <h4 class="text-center m-t">Oil Status</h4>

        <div class="segmented-control">
            <a class="control-item active" data-target="#test-oil-ok" ng-click="changeActionStatus('OK', 1)">
                OK
            </a>
            <a class="control-item" data-target="#test-oil-warning" ng-click="changeActionStatus('WARNING', 1)">
                Warning
            </a>
            <a class="control-item" data-target="#test-oil-action" ng-click="changeActionStatus('ACTION', 1)">
                Action
            </a>
        </div>

        <div class="card">
            <div id="test-oil-ok" class="control-content"
                 ng-class="{true: 'active'}[status.oil == null || status.oil == 'OK']">
                <p class="text-center m-t-sm">No further action required.</p>
            </div>
            <div id="test-oil-warning" class="control-content" ng-class="{true: 'active'}[status.oil == 'WARNING']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="oil.issue" placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="oil.action" placeholder="Action to be taken">
                    </div>
                </form>
            </div>
            <div id="test-oil-action" class="control-content" ng-class="{true: 'active'}[status.oil == 'ACTION']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="oil.issue" placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="oil.action" placeholder="Action to be taken">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.wear != false">
        <h4 class="text-center m-t">Wear Test</h4>

        <div class="card">
            <form class="input-group">
                <div class="input-row">
                    <label>SMU</label>
                    <input type="text" pattern="[0-9]*" ng-model="wear.SMU" placeholder="SMU">
                </div>

                <div class="input-row" ng-repeat="uniqueDetails in subAssembly.subAssembly.uniqueDetails">
                    <label>{{ uniqueDetails }}</label>
                    <input type="text" ng-model="wear.detail[$index]" placeholder="{{ uniqueDetails }}">
                </div>
            </form>
        </div>

        <h4 class="text-center m-t">Wear Status</h4>

        <div class="segmented-control">
            <a class="control-item active" data-target="#test-wear-ok" ng-click="changeActionStatus('OK', 3)">
                OK
            </a>
            <a class="control-item" data-target="#test-wear-warning" ng-click="changeActionStatus('WARNING', 3)">
                Warning
            </a>
            <a class="control-item" data-target="#test-wear-action" ng-click="changeActionStatus('ACTION', 3)">
                Action
            </a>
        </div>

        <div class="card">
            <div id="test-wear-ok" class="control-content"
                 ng-class="{true: 'active'}[status.wear == null || status.wear == 'OK']">
                <p class="text-center m-t-sm">No further action required.</p>
            </div>
            <div id="test-wear-warning" class="control-content" ng-class="{true: 'active'}[status.wear == 'WARNING']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="wear.issue" placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="wear.action" placeholder="Action to be taken">
                    </div>
                </form>
            </div>
            <div id="test-wear-action" class="control-content" ng-class="{true: 'active'}[status.wear == 'ACTION']">
                <form class="input-group">
                    <div class="input-row">
                        <label>Issue</label>
                        <input type="text" ng-model="wear.issue" placeholder="Issue with machinery">
                    </div>
                    <div class="input-row">
                        <label>Action</label>
                        <input type="text" ng-model="wear.action" placeholder="Action to be taken">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <button class="btn btn-negative" ng-click="saveSubAssembly(oil, machineTest, wear)">Save</button>
</div>

<div id="comments" class="control-content">
    <p class="content-padded text-center">Comments are not required, but allow you to pass on further information to the
        Domain Expert.</p>

    <div ng-if="subAssembly.subAssembly.machineGeneral != false">
        <h4 class="text-center m-t">Machine General Test</h4>

        <div class="content-padded">
            <form class="form-group m-b-n-xs">
                <textarea class="m-b-none" rows="3" ng-model="machineTest.comment" placeholder="Comment"></textarea>
            </form>
        </div>

        <div class="card">
            <ul class="table-view" ng-if="machineGeneralTest.comments.length > 0">
                <li class="table-view-cell media" ng-repeat="comment in machineGeneralTest.comments">
                    <img class="media-object pull-left" ng-src="data:image/jpeg;base64,{{ getAuthorPhoto(comment) }}">
                    <div class="media-body">
                        {{ comment.author.name }}<br/>
                        <small>
                            {{ moment(comment.timeCommented).format('HH:mm, ddd Do MMM YYYY') }}
                        </small>
                        <br/>
                        <p>
                            {{ comment.text }}
                        </p>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.oil != false">
        <h4 class="text-center m-t">Oil Test</h4>

        <div class="content-padded">
            <form class="form-group m-b-n-xs">
                <textarea class="m-b-none" rows="3" ng-model="oil.comment" placeholder="Comment"></textarea>
            </form>
        </div>

        <div class="card">
            <ul class="table-view" ng-if="oilTest.comments.length > 0">
                <li class="table-view-cell media" ng-repeat="comment in oilTest.comments">
                    <img class="media-object pull-left" ng-src="data:image/jpeg;base64,{{ getAuthorPhoto(comment) }}">
                    <div class="media-body">
                        {{ comment.author.name }}<br/>
                        <small>
                            {{ moment(comment.timeCommented).format('HH:mm, ddd Do MMM YYYY') }}
                        </small>
                        <br/>
                        <p>
                            {{ comment.text }}
                        </p>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div ng-if="subAssembly.subAssembly.wear != false">
        <h4 class="text-center m-t">Wear Test</h4>

        <div class="content-padded">
            <form class="form-group m-b-n-xs">
                <textarea class="m-b-none" rows="3" ng-model="wear.comment" placeholder="Comment"></textarea>
            </form>
        </div>

        <div class="card">
            <ul class="table-view" ng-if="wearTest.comments.length > 0">
                <li class="table-view-cell media" ng-repeat="comment in wearTest.comments">
                    <img class="media-object pull-left" ng-src="data:image/jpeg;base64,{{ getAuthorPhoto(comment) }}">
                    <div class="media-body">
                        {{ comment.author.name }}<br/>
                        <small>
                            {{ moment(comment.timeCommented).format('HH:mm, ddd Do MMM YYYY') }}
                        </small>
                        <br/>
                        <p>
                            {{ comment.text }}
                        </p>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>


<div id="photos" class="control-content">
    <div ng-if="subAssembly.subAssembly.oil != false">
        <button class="btn btn-negative btn-block" ng-click="takePhoto('oil')">Take Photo <i class="fa fa-camera"
                                                                                             aria-hidden="true"></i>
        </button>
        <br>
        <ul class="table-view" ng-if="oilPhotos.length >=1">
            <li class="table-view-cell" ng-repeat="picture in oilPhotos">
                Photo: <img ng-src="data:image/jpeg;base64,{{ picture.photo }}" height="42" width="42"/>
            </li>
        </ul>
    </div>

    <div ng-if="subAssembly.subAssembly.machineGeneral != false">
        <button class="btn btn-negative btn-block" ng-click="takePhoto('machine')">Take Photo <i class="fa fa-camera"
                                                                                                 aria-hidden="true"></i>
        </button>
        <br>
        <ul class="table-view" ng-if="machinePhotos.length >=1">
            <li class="table-view-cell" ng-repeat="picture in machinePhotos">
                Photo: <img ng-src="data:image/jpeg;base64,{{ picture.photo }}" height="42" width="42"/>
            </li>
        </ul>
    </div>

    <div ng-if="subAssembly.subAssembly.wear != false">
        <button class="btn btn-negative btn-block" ng-click="takePhoto('wear')">Take Photo <i class="fa fa-camera"
                                                                                              aria-hidden="true"></i>
        </button>
        <br>
        <ul class="table-view" ng-if="wearPhotos.length >=1">
            <li class="table-view-cell" ng-repeat="picture in wearPhotos">
                Photo: <img ng-src="data:image/jpeg;base64,{{ picture.photo }}" height="42" width="42"/>
            </li>
        </ul>
    </div>
</div>
