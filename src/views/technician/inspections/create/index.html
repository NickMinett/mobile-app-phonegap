
<div class="text-center" ng-if="loading == true">
    <i class="fa fa-spinner fa-spin fa-3x"></i>
</div>

<div>
    Select a Machine to begin Inspection:
    <div class="dropdown">
        <select ng-model = "machine" style = "cursor: pointer" ng-change="setMachine(machine)"
            ng-options="machine as ('Machine ' + machine.id + ' : ' + machine.model.name) for machine in machines">
            <option value="">-- Select Machine --</option>
        </select>
    </div>

    <div ng-show="selectedMachine != null">
        Machine ID: {{selectedMachine.id}} <br>
        Model: {{selectedMachine.model.name}} <br>
        Major Assemblies:
        <br><br>
        <table>
            <tr ng-repeat-start="majorAssembly in selectedMachine.model.majorAssemblies" ng-click = "showSubAssemblies = !showSubAssemblies"
                ng-click = "toggleMajorAssembly(majorAssembly.id);">
                <td colspan="4"> <b>{{ majorAssembly.name }}</b> <i class="fa fa-angle-down" aria-hidden="true"></i></td>
                <td class="table-header-row">
                    <button type="button"  class= "fa fa-square-o" ng-if="showSubAssemblies == true"
                            ng-click = "$event.stopPropagation(); toggleMajorAssembly(majorAssembly.id);">
                    </button>
                </td>
            </tr>

            <tr ng-repeat="subAssembly in majorAssembly.subAssemblies" ng-if="showSubAssemblies == true">
                <td>{{ subAssembly.name }}</td>
                <td>
                    <button ng-click = "toggleSubAssembly(majorAssembly.id, subAssembly.id)" class = "fa fa-check-square-o"
                            ng-if="inspection.selectedMajorAssemblies[majorAssembly.id][subAssembly.id] == true">
                    </button>

                    <button ng-click = "toggleSubAssembly(majorAssembly.id, subAssembly.id)" class = "fa fa-square-o"
                            ng-if="inspection.selectedMajorAssemblies[majorAssembly.id][subAssembly.id] == false">
                    </button>
                </td>
            </tr>
            <tr ng-repeat-end></tr>
        </table>
    </div>
</div>

