
<div class="text-center" ng-if="loading == true">
    <i class="fa fa-spinner fa-spin fa-3x"></i>
</div>

<div ng-if="loading == false">
    Select a Machine to begin Inspection:
    <div class="dropdown">
        <select ng-model = "machine" style = "cursor: pointer" ng-change="setMachine(machine)"
            ng-options="machine as ('Machine ' + machine.id + ' : ' + machine.model.name) for machine in machines">
            <option value="">-- Select City --</option>
        </select>
    </div>

    <div ng-show="selectedMachine != null">
        Machine ID: {{selectedMachine.id}} <br>
        Model: {{selectedMachine.model.name}} <br>
        Major Assemblies:
        <ul class="table-view" ng-model = "majorAssembly">
            <li class="table-view-cell" ng-repeat="majorAssembly in selectedMachine.model.majorAssemblies"
                ng-click = "showSubAssemblies = !showSubAssemblies" style = "cursor: pointer">
                {{ majorAssembly.name }} <i class="fa fa-angle-down" aria-hidden="true"></i>
                <button type="button"  class="form-button-0" ng-click = "$event.stopPropagation(); toggleMajorAssembly(majorAssembly.id);">
                    <i class="fa fa-fw fa-angle-down"></i>
                    Toggle All
                </button>

                <ul class = "table-view" ng-if="showSubAssemblies == true" ng-click= "$event.stopPropagation();"
                    style = "cursor: auto">
                    <li class = "table-view-cell" ng-repeat= "subAssembly in majorAssembly.subAssemblies">
                    {{subAssembly.name}}
                    <button ng-click = "toggleSubAssembly(majorAssembly.id, subAssembly.id)" class = "form-button-0">
                        <span ng-if="inspection.selectedMajorAssemblies[majorAssembly.id][subAssembly.id] == true">
                                <i class="fa fa-fw fa-check"></i>
                                Yes, Test
                            </span>
                        <span ng-if="inspection.selectedMajorAssemblies[majorAssembly.id][subAssembly.id] == false">
                                <i class="fa fa-fw fa-remove"></i>
                                No, Don't Test
                            </span>
                    </button>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</div>

